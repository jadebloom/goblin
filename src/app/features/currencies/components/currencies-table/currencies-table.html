<p-confirm-dialog />

@if (tableService.getting.isLoading()) {
	<p-progress-spinner class="flex justify-center" aria-label="Currencies loading..." />
} @else {
	<div class="card">
		<p-table
			[value]="tableService.currencies()"
			paginator
			[rows]="tableService.pagination.size"
			[first]="tableService.pagination.number"
			[rowsPerPageOptions]="[5, 10, 20, 50]"
			showCurrentPageReport
			currentPageReportTemplate="Showing {first} to {last} of {totalRecords} currencies"
			stripedRows
			[tableStyle]="{ 'min-width': '50rem' }"
			(onPage)="tableService.pageChange($event)"
		>
			<ng-template #header>
				<tr>
					<th style="width: 15%">ID</th>
					<th style="width: 20%">Name</th>
					<th style="width: 25%">Alphabetical Code</th>
					<th style="width: 25%">Created At</th>
					<th style="width: 15%">Actions</th>
				</tr>
			</ng-template>

			<ng-template #body let-currency>
				<tr>
					<td>{{ currency.id ?? '-' }}</td>
					<td>{{ currency.name ?? '-' }}</td>
					<td class="uppercase">{{ currency.alphabetical_code ?? '-' }}</td>
					<td>{{ (currency.created_at | date: 'long') ?? '-' }}</td>
					<td>
						<p-buttongroup>
							<p-button
								label="Update"
								text
								size="small"
								[disabled]="typeof currency.id != 'number'"
								icon="pi pi-check"
								(onClick)="openCurrencyUpdateDialog(currency)"
							/>

							<p-button
								label="Delete"
								text
								severity="danger"
								size="small"
								[disabled]="typeof currency.id != 'number'"
								icon="pi pi-trash"
								(onClick)="confirmDeletion($event, currency.id)"
							/>
						</p-buttongroup>
					</td>
				</tr>
			</ng-template>
		</p-table>
	</div>
}
